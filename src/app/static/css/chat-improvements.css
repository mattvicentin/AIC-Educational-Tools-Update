/* Chat Page Improvements - Reduced !important usage */

/* Better viewport height for mobile browsers */
body.focus-mode .chat-layout,
body.focus-mode .chat-container,
body.focus-mode .chat-main { 
    height: 100dvh; /* Dynamic viewport height - accounts for mobile browser chrome */
}

/* Focus mode input positioning - overrides normal flow */
body.focus-mode .chat-input-container { 
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    margin: 0 !important; /* Remove normal-flow margins in focus mode */
    z-index: 10000;
    display: block;
}

/* Normal mode: Let flexbox handle positioning (no fixed rules here) */
/* Composer is now a child of .chat-main flex container */

/* Screen reader only class */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Focus visible styles for better keyboard navigation */
.chat-input-container button:focus-visible,
.chat-input-container textarea:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
}

/* Mobile-specific improvements */
@media (max-width: 768px) {
    .chat-input-container {
        left: 0.5rem;
        right: 0.5rem;
        bottom: 0.5rem;
    }
    
    /* Prevent background scroll without nuking iOS scrolling */
    body.focus-mode {
        height: auto;              /* let the page breathe */
        overflow: visible;         /* don't lock the entire document */
    }
    
    /* The scrollable region only */
    #chat-messages {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-y: contain;
        touch-action: pan-y;
    }
    
    /* If you need to contain background under focus mode, do it locally */
    body.focus-mode #chat-messages {
        overscroll-behavior-y: contain;
    }
}

/* Continue button styling */
.continue-cta { 
    background: transparent; 
    border: 0; 
    cursor: pointer; 
    padding: 0; 
}

.continue-cta:focus { 
    outline: 2px solid hsl(var(--primary)); 
    outline-offset: 2px; 
}

/* Make "Add Comment" obvious and readable - higher specificity */
.message-timestamp button[data-toggle-comment] {
  color: hsl(var(--primary)) !important;                  /* high-contrast text */
  background: hsl(var(--primary) / 0.08) !important;      /* subtle chip bg */
  border: 1px solid hsl(var(--primary) / 0.35) !important;
  padding: 0.125rem 0.5rem !important;                    /* 2px x 8px-ish */
  border-radius: 9999px !important;                       /* pill */
  font-weight: 600 !important;
  line-height: 1 !important;                              
}

.message-timestamp button[data-toggle-comment]:hover {
  background: hsl(var(--primary) / 0.15) !important;
  border-color: hsl(var(--primary) / 0.5) !important;
  color: hsl(var(--primary)) !important;
}

.message-timestamp button[data-toggle-comment]:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}

/* Pin toggle buttons - match Add Comment chip styling */
.message-timestamp button.pin-toggle {
  color: hsl(var(--primary)) !important;
  background: hsl(var(--primary) / 0.08) !important;
  border: 1px solid hsl(var(--primary) / 0.35) !important;
  padding: 0.125rem 0.5rem !important;
  border-radius: 0.375rem !important;
  font-weight: 600 !important;
  font-size: 0.75rem !important;
  opacity: 1 !important;  /* Cancel parent .message-timestamp opacity: 0.7 */
  transition: all 0.15s ease !important;
}

.message-timestamp button.pin-toggle:hover {
  background: hsl(var(--primary) / 0.15) !important;
  border-color: hsl(var(--primary) / 0.5) !important;
  color: hsl(var(--primary)) !important;
}

.message-timestamp button.pin-toggle:focus-visible {
  outline: 2px solid hsl(var(--primary));
  outline-offset: 2px;
}
